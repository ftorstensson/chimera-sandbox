(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5694:(e,a,t)=>{Promise.resolve().then(t.bind(t,6768))},6768:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>eP});var s=t(5155),n=t(2115),l=t(1362);function i(e){let{children:a,...t}=e;return(0,s.jsx)(l.N,{...t,children:a})}var r=t(4253),o=t(2085),d=t(9434);let c=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=n.forwardRef((e,a)=>{let{className:t,variant:n,size:l,asChild:i=!1,...o}=e,m=i?r.DX:"button";return(0,s.jsx)(m,{className:(0,d.cn)(c({variant:n,size:l,className:t})),ref:a,...o})});m.displayName="Button";var u=t(9864),h=t(124);let g=(0,o.F)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});n.forwardRef((e,a)=>{let{className:t,variant:n,size:l,...i}=e;return(0,s.jsx)(h.b,{ref:a,className:(0,d.cn)(g({variant:n,size:l,className:t})),...i})}).displayName=h.b.displayName;let x=n.createContext({size:"default",variant:"default"}),p=n.forwardRef((e,a)=>{let{className:t,variant:n,size:l,children:i,...r}=e;return(0,s.jsx)(u.bL,{ref:a,className:(0,d.cn)("flex items-center justify-center gap-1",t),...r,children:(0,s.jsx)(x.Provider,{value:{variant:n,size:l},children:i})})});p.displayName=u.bL.displayName;let f=n.forwardRef((e,a)=>{let{className:t,children:l,variant:i,size:r,...o}=e,c=n.useContext(x);return(0,s.jsx)(u.q7,{ref:a,className:(0,d.cn)(g({variant:c.variant||i,size:c.size||r}),t),...o,children:l})});f.displayName=u.q7.displayName;var y=t(4011),v=t(9556),j=t(7381),N=t(518);let T=y.bL;y.YJ;let b=y.WT,S=n.forwardRef((e,a)=>{let{className:t,children:n,...l}=e;return(0,s.jsxs)(y.l9,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[n,(0,s.jsx)(y.In,{asChild:!0,children:(0,s.jsx)(v.A,{className:"h-4 w-4 opacity-50"})})]})});S.displayName=y.l9.displayName;let w=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(y.PP,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,s.jsx)(j.A,{className:"h-4 w-4"})})});w.displayName=y.PP.displayName;let _=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(y.wn,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...n,children:(0,s.jsx)(v.A,{className:"h-4 w-4"})})});_.displayName=y.wn.displayName;let E=n.forwardRef((e,a)=>{let{className:t,children:n,position:l="popper",...i}=e;return(0,s.jsx)(y.ZL,{children:(0,s.jsxs)(y.UC,{ref:a,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...i,children:[(0,s.jsx)(w,{}),(0,s.jsx)(y.LM,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,s.jsx)(_,{})]})})});E.displayName=y.UC.displayName,n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(y.JU,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...n})}).displayName=y.JU.displayName;let A=n.forwardRef((e,a)=>{let{className:t,children:n,...l}=e;return(0,s.jsxs)(y.q7,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(y.VF,{children:(0,s.jsx)(N.A,{className:"h-4 w-4"})})}),(0,s.jsx)(y.p4,{children:n})]})});A.displayName=y.q7.displayName,n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(y.wv,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...n})}).displayName=y.wv.displayName;var C=t(9615),I=t(3158),k=t(154);let D=C.bL,O=C.l9;C.YJ,C.ZL,C.Pb,C.z6,n.forwardRef((e,a)=>{let{className:t,inset:n,children:l,...i}=e;return(0,s.jsxs)(C.ZP,{ref:a,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t),...i,children:[l,(0,s.jsx)(I.A,{className:"ml-auto"})]})}).displayName=C.ZP.displayName,n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(C.G5,{ref:a,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}).displayName=C.G5.displayName;let R=n.forwardRef((e,a)=>{let{className:t,sideOffset:n=4,...l}=e;return(0,s.jsx)(C.ZL,{children:(0,s.jsx)(C.UC,{ref:a,sideOffset:n,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});R.displayName=C.UC.displayName;let M=n.forwardRef((e,a)=>{let{className:t,inset:n,...l}=e;return(0,s.jsx)(C.q7,{ref:a,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t),...l})});M.displayName=C.q7.displayName,n.forwardRef((e,a)=>{let{className:t,children:n,checked:l,...i}=e;return(0,s.jsxs)(C.H_,{ref:a,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:l,...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(C.VF,{children:(0,s.jsx)(N.A,{className:"h-4 w-4"})})}),n]})}).displayName=C.H_.displayName,n.forwardRef((e,a)=>{let{className:t,children:n,...l}=e;return(0,s.jsxs)(C.hN,{ref:a,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(C.VF,{children:(0,s.jsx)(k.A,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=C.hN.displayName,n.forwardRef((e,a)=>{let{className:t,inset:n,...l}=e;return(0,s.jsx)(C.JU,{ref:a,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...l})}).displayName=C.JU.displayName;let U=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(C.wv,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...n})});U.displayName=C.wv.displayName;var P=t(4063),z=t(8046),H=t(3561),L=t(8763),G=t(7223),F=t(286),V=t(4601),J=t(6936),Y=t(8027),W=t(8271),q=t(8341);let B="hover:bg-gray-200 dark:hover:bg-zinc-800",Z="!bg-gray-300 text-gray-900 dark:!bg-zinc-700 dark:text-gray-100",K=e=>{var a;return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"p-2 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)(P.A,{className:"mx-auto h-8 w-8 mb-2"}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Designer Chat"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pick the multi-agent team that you want to work with"})]}),(0,s.jsxs)(T,{value:(null==(a=e.activeTeam)?void 0:a.teamId)||"",onValueChange:e.onTeamSelect,children:[(0,s.jsx)(S,{className:"w-full focus:ring-indigo-500 ".concat(Z),children:(0,s.jsx)(b,{placeholder:"Select a team..."})}),(0,s.jsx)(E,{className:"bg-white text-gray-900 dark:bg-zinc-800 dark:text-white",children:e.teams.map(e=>(0,s.jsx)(A,{value:e.teamId,children:e.name},e.teamId))})]}),(0,s.jsxs)(m,{variant:"ghost",className:"w-full justify-start mt-2 ".concat(B),onClick:e.onNewChat,children:[(0,s.jsx)(z.A,{className:"mr-2 h-4 w-4"})," New Design Chat"]})]}),(0,s.jsxs)("div",{className:"flex-grow overflow-y-auto mt-4 pt-4 border-t border-gray-200 dark:border-zinc-800",children:[(0,s.jsx)("p",{className:"px-3 text-xs uppercase text-gray-500 tracking-wider",children:"Recent Design Chats"}),(0,s.jsx)("nav",{className:"mt-2 space-y-1 px-2",children:e.chatHistory.length>0?e.chatHistory.map(a=>(0,s.jsxs)("div",{className:"group flex items-center rounded-md cursor-pointer ".concat(B," ").concat(e.currentChatId===a.chatId?Z:""),onClick:()=>e.onLoadChat(a.chatId),children:[(0,s.jsx)("span",{className:"flex-grow truncate px-2 py-2",children:a.title}),(0,s.jsxs)(D,{children:[(0,s.jsx)(O,{asChild:!0,onClick:e=>e.stopPropagation(),children:(0,s.jsx)(m,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0 opacity-0 group-hover:opacity-100",children:(0,s.jsx)(H.A,{size:16})})}),(0,s.jsxs)(R,{children:[(0,s.jsxs)(M,{onClick:t=>{t.stopPropagation(),e.onRenameChat(a)},children:[(0,s.jsx)(L.A,{className:"mr-2 h-4 w-4"}),"Rename"]}),(0,s.jsxs)(M,{className:"text-red-500",onClick:t=>{t.stopPropagation(),e.onDeleteChat(a)},children:[(0,s.jsx)(G.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]},a.chatId)):(0,s.jsx)("p",{className:"px-3 py-2 text-sm text-gray-500",children:"No chats for this team yet."})})]})]})},$=e=>(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"p-2 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)(F.A,{className:"mx-auto h-8 w-8 mb-2"}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Team Building"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Build and manage your multi-agent teams."})]}),(0,s.jsxs)(m,{variant:"outline",className:"w-full justify-start ".concat(B," text-indigo-500 border-indigo-500/50 hover:text-indigo-400"),onClick:e.onCreateTeamWithAIClick,children:[(0,s.jsx)(V.A,{className:"mr-2 h-4 w-4"})," New Team with AI"]})]}),e.designSessions.length>0&&(0,s.jsxs)("div",{className:"flex-shrink-0 mt-4 pt-4 border-t border-gray-200 dark:border-zinc-800",children:[(0,s.jsx)("p",{className:"px-3 text-xs uppercase text-gray-500 tracking-wider",children:"In Progress"}),(0,s.jsx)("nav",{className:"mt-2 space-y-1 px-2",children:e.designSessions.map(a=>{var t,n;return(0,s.jsxs)("div",{className:"group flex items-center rounded-md cursor-pointer ".concat(B," ").concat((null==(t=e.activeDesignSession)?void 0:t.designSessionId)===a.designSessionId?Z:""),children:[(0,s.jsx)("span",{className:"flex-grow truncate px-2 py-2 ".concat((null==(n=e.activeDesignSession)?void 0:n.designSessionId)===a.designSessionId?"animate-pulse":""),onClick:()=>e.onLoadDesignSession(a),children:a.name}),(0,s.jsxs)(D,{children:[(0,s.jsx)(O,{asChild:!0,onClick:e=>e.stopPropagation(),children:(0,s.jsx)(m,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0 opacity-0 group-hover:opacity-100",children:(0,s.jsx)(H.A,{size:16})})}),(0,s.jsx)(R,{children:(0,s.jsxs)(M,{className:"text-red-500",onClick:t=>{t.stopPropagation(),e.onDeleteDesignSession(a)},children:[(0,s.jsx)(G.A,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]},a.designSessionId)})})]}),(0,s.jsxs)("div",{className:"flex-grow overflow-y-auto mt-4 pt-4 border-t border-gray-200 dark:border-zinc-800",children:[(0,s.jsx)("p",{className:"px-3 text-xs uppercase text-gray-500 tracking-wider",children:"Manage Teams & Agents"}),(0,s.jsx)("nav",{className:"mt-2 space-y-1 px-2",children:e.teams.map(a=>{var t;return(0,s.jsx)(m,{variant:"ghost",className:"w-full justify-start ".concat(B," ").concat((null==(t=e.activeTeam)?void 0:t.teamId)===a.teamId?Z:""),onClick:()=>e.onTeamSelect(a),children:a.name},a.teamId)})})]})]}),Q=e=>{let{theme:a,setTheme:t}=(0,l.D)(),[i,r]=n.useState(!0);return(0,s.jsxs)("div",{className:"flex h-screen bg-white dark:bg-[#171719] text-gray-900 dark:text-gray-100",children:[(0,s.jsx)("aside",{className:"flex flex-col flex-shrink-0 bg-gray-100 dark:bg-[#141415] transition-all duration-300 ".concat(i?"w-72 p-2":"w-0"),children:(0,s.jsxs)("div",{className:"flex flex-col flex-grow overflow-hidden",children:[(0,s.jsx)("div",{className:"flex-shrink-0 p-2 transition-opacity duration-200 ".concat(i?"opacity-100":"opacity-0"),children:(0,s.jsxs)(p,{type:"single",value:e.activeMode,onValueChange:a=>{a&&e.setActiveMode(a)},className:"w-full grid grid-cols-2",children:[" ",(0,s.jsx)(f,{value:"chat","aria-label":"Toggle chat mode",className:"chat"===e.activeMode?Z:B,children:"CHAT"})," ",(0,s.jsx)(f,{value:"team","aria-label":"Toggle team mode",className:"team"===e.activeMode?Z:B,children:"TEAM"})," "]})}),(0,s.jsx)("div",{className:"flex-grow mt-2 overflow-y-auto transition-opacity duration-200 ".concat(i?"opacity-100":"opacity-0"),children:"chat"===e.activeMode?(0,s.jsx)(K,{...e,onTeamSelect:e.onSetActiveTeam}):(0,s.jsx)($,{...e,onTeamSelect:e.onSetActiveTeam})}),(0,s.jsxs)("div",{className:"flex-shrink-0 border-t border-gray-200 dark:border-zinc-800 mt-2 pt-2 flex items-center justify-between transition-opacity duration-200 ".concat(i?"opacity-100":"opacity-0"),children:[" ",(0,s.jsxs)(m,{variant:"ghost",size:"icon",onClick:()=>t("dark"===a?"light":"dark"),className:B,children:[" ",(0,s.jsx)(J.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"})," ",(0,s.jsx)(Y.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})," "]})," ",(0,s.jsxs)(m,{variant:"ghost",className:"text-sm ".concat(B),children:[" ",(0,s.jsx)(W.A,{className:"mr-2 h-4 w-4"})," Settings "]})," "]})]})}),(0,s.jsxs)("div",{className:"flex flex-col flex-1 h-full min-w-0",children:[" ",(0,s.jsxs)("header",{className:"flex items-center p-2 flex-shrink-0 border-b border-gray-200 dark:border-zinc-800",children:[" ",(0,s.jsxs)(m,{variant:"ghost",size:"icon",onClick:()=>r(!i),className:"mr-2 text-gray-500",children:[" ",(0,s.jsx)(q.A,{size:24})," "]})," ",(0,s.jsx)("h1",{className:"text-xl font-semibold",children:"GoddessAI - the Everything Agency"})," "]})," ",(0,s.jsxs)("main",{className:"flex-1 overflow-y-auto",children:[" ",e.children," "]})," "]})]})};function X(e){return(0,s.jsxs)(i,{attribute:"class",defaultTheme:"dark",enableSystem:!0,disableTransitionOnChange:!0,children:[" ",(0,s.jsx)(Q,{...e})," "]})}let ee=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...n})});function ea(e){let{children:a}=e;return(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("div",{className:"bg-gray-200 text-gray-800 px-4 py-3 rounded-2xl rounded-br-none w-fit max-w-[90%]",children:a})})}ee.displayName="Textarea";var et=t(8240);let es=n.memo(e=>{let{children:a}=e,t="string"==typeof a?a:String(a);return(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"prose dark:prose-invert max-w-none text-foreground/90",children:(0,s.jsx)(et.oz,{children:t})})})});es.displayName="AssistantMessage";let en=e=>{let{message:a,onAction:t}=e;return(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,s.jsx)("p",{className:"text-base text-foreground/90",children:a.text}),(0,s.jsx)("div",{className:"w-full flex justify-end space-x-2",children:a.actions.map(e=>(0,s.jsx)(m,{variant:"outline",size:"sm",onClick:()=>t(e.id),className:e.isPrimary?"bg-primary text-primary-foreground hover:bg-primary/90 border-primary":"bg-background hover:bg-accent hover:text-accent-foreground",children:e.text},e.id))})]})})},el=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:(0,d.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...n})});el.displayName="Card";let ei=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",t),...n})});ei.displayName="CardHeader";let er=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:(0,d.cn)("font-semibold leading-none tracking-tight",t),...n})});er.displayName="CardTitle",n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",t),...n})}).displayName="CardDescription";let eo=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:(0,d.cn)("p-6 pt-0",t),...n})});eo.displayName="CardContent",n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:a,className:(0,d.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter";var ed=t(6318),ec=t(7724);let em=e=>({concept_crafter:"From the desk of: The Concept Crafter",guide_agent:"From the desk of: The Guide",insight_agent:"From the desk of: The Insight Agent"})[e]||"A new report from our team",eu=e=>"object"!=typeof e||null===e?(0,s.jsx)("p",{children:String(e)}):Array.isArray(e)?e.length>0&&e[0].name&&e[0].url?(0,s.jsx)("ul",{className:"space-y-2",children:e.map((e,a)=>(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(ed.A,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:e.name})]},a))}):(0,s.jsx)("p",{children:e.join(", ")}):(0,s.jsx)("div",{className:"ml-4 space-y-1 border-l-2 border-gray-200 pl-4",children:Object.entries(e).map(e=>{let[a,t]=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold text-gray-600",children:[a.replace(/([A-Z])/g," $1").trim(),":"]}),(0,s.jsx)("div",{className:"pl-2",children:eu(t)})]},a)})}),eh=e=>{let{agentName:a,data:t}=e;return t?(0,s.jsxs)(el,{className:"mt-4 bg-indigo-50/50 border-indigo-200 shadow-md",children:[(0,s.jsx)(ei,{className:"pb-2",children:(0,s.jsxs)(er,{className:"text-lg font-semibold flex items-center gap-3 text-indigo-800",children:[(0,s.jsx)(ec.A,{className:"h-6 w-6"}),em(a)]})}),(0,s.jsx)(eo,{className:"text-gray-700",children:Object.entries(t).map(e=>{let[a,t]=e;return(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)("p",{className:"font-semibold",children:[a.replace(/([A-Z])/g," $1").trim(),":"]}),(0,s.jsx)("div",{className:"pl-2",children:eu(t)})]},a)})})]}):null};var eg=t(9829),ex=t(3672),ep=t(5300),ef=t(4823);let ey=()=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold",children:"The Everything Agency"}),(0,s.jsx)("p",{className:"mt-2 text-lg text-gray-500 dark:text-gray-400",children:"Your creative partner for designing new applications."})]}),ev=e=>{let{messages:a,currentInput:t,setCurrentInput:l,isLoading:i,holdingMessage:r,handleSendMessage:o,onAction:c}=e,u=n.useRef(null);n.useEffect(()=>{var e;null==(e=u.current)||e.scrollIntoView({behavior:"smooth"})},[a,r]);let h=i||!t.trim();return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,s.jsxs)("div",{className:"w-full max-w-3xl mx-auto space-y-6",children:[a.map((e,a)=>{if("user"===e.role&&e.content)return(0,s.jsx)(ea,{children:e.content},a);if("assistant"===e.role&&e.content){let t=(0,d.r)(e.content);if("execute_task"===t.action)return null;if("redirect_to_team_builder"===t.action&&t.text&&t.actions){let e={message:{text:t.text,actions:t.actions},onAction:c};return(0,s.jsx)(en,{...e},a)}return(0,s.jsxs)(es,{children:[t.text,e.agent_used&&e.structured_data&&(0,s.jsx)(eh,{agentName:e.agent_used,data:e.structured_data})]},a)}return null}),r&&(0,s.jsx)(es,{children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eg.A,{className:"h-5 w-5 animate-pulse text-yellow-500"}),(0,s.jsx)("span",{children:r})]})}),i&&!r&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"prose dark:prose-invert max-w-none text-foreground/90",children:(0,s.jsx)("span",{className:"animate-pulse",children:"..."})})}),(0,s.jsx)("div",{ref:u})]})}),(0,s.jsx)("div",{className:"flex-shrink-0 p-4 border-t border-gray-200 dark:border-zinc-800",children:(0,s.jsxs)("div",{className:"w-full max-w-3xl mx-auto",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(ee,{value:t,onChange:e=>l(e.target.value),placeholder:"Ask a question or delegate a new task...",className:"flex-grow rounded-lg px-4 py-2 pr-20 resize-none bg-gray-100 dark:bg-zinc-800",rows:1,onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),h||o())}}),(0,s.jsx)(m,{onClick:()=>o(),className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-lg h-9 w-16 bg-indigo-600 hover:bg-indigo-700 text-white",disabled:h,children:(0,s.jsx)(ex.A,{className:"h-4 w-4"})})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"The AI will automatically detect if your message is a simple question or a complex task."})]})})]})},ej=e=>{let{team:a,agents:t,isLoading:l,onCreateAgent:i,onEditAgent:r,onUpdateMission:o,onRenameTeam:d,onDeleteTeam:c}=e,[u,h]=(0,n.useState)(a.mission),[g,x]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{h(a.mission),x(!1)},[a]),(0,s.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,s.jsxs)("header",{className:"pb-4 border-b border-gray-200 dark:border-zinc-800",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:a.name}),(0,s.jsxs)(D,{children:[(0,s.jsx)(O,{asChild:!0,children:(0,s.jsxs)(m,{variant:"outline",children:[(0,s.jsx)(H.A,{className:"mr-2 h-4 w-4"})," Team Actions"]})}),(0,s.jsxs)(R,{children:[(0,s.jsxs)(M,{onClick:i,children:[(0,s.jsx)(z.A,{className:"mr-2 h-4 w-4"}),"New Agent"]}),(0,s.jsxs)(M,{onClick:()=>x(!0),disabled:g,children:[(0,s.jsx)(L.A,{className:"mr-2 h-4 w-4"}),"Edit Mission"]}),(0,s.jsx)(U,{}),(0,s.jsxs)(M,{onClick:d,children:[(0,s.jsx)(ep.A,{className:"mr-2 h-4 w-4"}),"Rename Team"]}),(0,s.jsxs)(M,{className:"text-red-500",onClick:c,children:[(0,s.jsx)(G.A,{className:"mr-2 h-4 w-4"}),"Delete Team"]})]})]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Team Mission (Source of Truth)"}),g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ee,{value:u,onChange:e=>h(e.target.value),placeholder:"Define the core purpose of this team...",className:"w-full text-base",rows:4}),(0,s.jsxs)("div",{className:"mt-2 flex space-x-2",children:[(0,s.jsx)(m,{size:"sm",onClick:()=>{o(u),x(!1)},disabled:u===a.mission,children:"Save Mission"}),(0,s.jsx)(m,{size:"sm",variant:"outline",onClick:()=>{h(a.mission),x(!1)},children:"Cancel"})]})]}):(0,s.jsx)("p",{className:"text-base text-foreground/80 flex-grow whitespace-pre-wrap min-h-[60px]",children:a.mission||"No mission defined yet."})]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Team Agents"}),l?(0,s.jsx)("p",{children:"Loading agents..."}):(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,s.jsxs)("div",{className:"p-4 border dark:border-zinc-800 rounded-lg flex justify-between items-start hover:bg-gray-50 dark:hover:bg-zinc-800/50",children:[(0,s.jsxs)("div",{className:"flex-grow mr-4 overflow-hidden",children:[(0,s.jsx)("h3",{className:"font-semibold",children:e.name}),(0,s.jsx)("div",{className:"prose prose-sm dark:prose-invert max-w-none text-gray-500 dark:text-gray-400 line-clamp-2",children:(0,s.jsx)(et.oz,{remarkPlugins:[ef.A],children:e.system_prompt})})]}),(0,s.jsx)(m,{variant:"outline",size:"sm",onClick:()=>r(e),className:"flex-shrink-0",children:"Edit"})]},e.agentId))})]})]})};var eN=t(5821),eT=t(5318);let eb=eN.bL;eN.l9;let eS=eN.ZL;eN.bm;let ew=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(eN.hJ,{ref:a,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n})});ew.displayName=eN.hJ.displayName;let e_=n.forwardRef((e,a)=>{let{className:t,children:n,...l}=e;return(0,s.jsxs)(eS,{children:[(0,s.jsx)(ew,{}),(0,s.jsxs)(eN.UC,{ref:a,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[n,(0,s.jsxs)(eN.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(eT.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});e_.displayName=eN.UC.displayName;let eE=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};eE.displayName="DialogHeader";let eA=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};eA.displayName="DialogFooter";let eC=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(eN.hE,{ref:a,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",t),...n})});eC.displayName=eN.hE.displayName;let eI=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(eN.VY,{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",t),...n})});eI.displayName=eN.VY.displayName;let ek=n.forwardRef((e,a)=>{let{className:t,type:n,...l}=e;return(0,s.jsx)("input",{type:n,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...l})});function eD(e){let{isOpen:a,onOpenChange:t,agentToEdit:l,onSave:i,onDelete:r}=e,[o,d]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),[h,g]=(0,n.useState)(!1),[x,p]=(0,n.useState)(!1),f=!(null==l?void 0:l.agentId);(0,n.useEffect)(()=>{l?(d(l.name),u(l.system_prompt),p(f)):(d(""),u(""),p(!0))},[l,f]);let y=async()=>{g(!0),await i({name:o,system_prompt:c}),g(!1)};return(0,s.jsx)(eb,{open:a,onOpenChange:t,children:(0,s.jsxs)(e_,{className:"sm:max-w-[600px]",children:[(0,s.jsxs)(eE,{children:[(0,s.jsx)(eC,{children:f?"Create New Agent":"Edit Agent"}),(0,s.jsx)(eI,{children:"Define the agent's name and its core instructions."})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)("label",{htmlFor:"name",className:"text-right",children:"Name"}),(0,s.jsx)(ek,{id:"name",value:o,onChange:e=>d(e.target.value),className:"col-span-3"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-start gap-4",children:[(0,s.jsx)("label",{className:"text-right pt-2",children:"System Prompt"}),(0,s.jsx)("div",{className:"col-span-3 border rounded-md p-3 min-h-[200px] bg-background",children:x||f?(0,s.jsx)(ee,{id:"prompt",value:c,onChange:e=>u(e.target.value),className:"w-full !p-0 !border-0 !ring-0 !outline-none resize-none",placeholder:"Enter system prompt (supports Markdown)..."}):(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)(m,{variant:"ghost",size:"icon",className:"absolute top-0 right-0 h-7 w-7 opacity-0 group-hover:opacity-100",onClick:()=>p(!0),children:(0,s.jsx)(L.A,{size:14})}),(0,s.jsx)("div",{className:"prose dark:prose-invert max-w-none text-sm text-foreground/90",children:(0,s.jsx)(et.oz,{remarkPlugins:[ef.A],children:c})})]})})]})]}),(0,s.jsxs)(eA,{className:"flex justify-between w-full",children:[(0,s.jsx)("div",{children:!f&&(0,s.jsx)(m,{variant:"destructive",onClick:()=>{l&&r(l)},children:"Delete"})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(m,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,s.jsx)(m,{onClick:y,disabled:h,children:h?"Saving...":"Save"})]})]})]})})}ek.displayName="Input";let eO={view:"welcome",teams:[],designSessions:[],chatHistory:[],agents:[],activeTeam:null,activeDesignSession:null,currentChatId:null,messages:[],holdingMessage:null,dialog:"none",chatToEdit:null,agentToDelete:null,designSessionToDelete:null,teamToEdit:null,status:"idle",error:null};function eR(e,a){switch(a.type){case"SET_STATUS":return{...e,status:a.payload,error:null};case"SET_ERROR":return{...e,status:"error",error:a.payload,holdingMessage:null};case"INITIAL_LOAD_SUCCESS":return{...e,teams:a.payload.teams,designSessions:a.payload.designSessions,activeTeam:"team_management"!==e.view&&a.payload.teams[0]||null,status:"idle"};case"SET_ACTIVE_TEAM_FOR_CHAT":return{...e,view:"chat",activeTeam:a.payload,activeDesignSession:null,currentChatId:null,messages:[],chatHistory:[],agents:[],status:"loading",holdingMessage:null};case"SET_ACTIVE_TEAM_FOR_MANAGEMENT":return{...e,view:"team_management",activeTeam:a.payload,activeDesignSession:null,agents:[],status:"loading",holdingMessage:null};case"FETCH_TEAM_DATA_SUCCESS":return{...e,status:"idle",chatHistory:a.payload.chatHistory,agents:a.payload.agents};case"SWITCH_MODE":let t="team"===a.payload?"team_management":"chat";return{...e,view:t,activeTeam:e.activeTeam||e.teams[0]||null,activeDesignSession:null};case"START_NEW_CHAT":if(!e.activeTeam)return{...e,currentChatId:null,messages:[],view:"chat",holdingMessage:null};let s={role:"assistant",content:"Hello! I'm the Project Manager for the **".concat(e.activeTeam.name,"** team. I'm ready to help you. What would you like to accomplish?")};return{...e,currentChatId:null,messages:[s],view:"chat",holdingMessage:null,status:"idle"};case"LOAD_CHAT_SUCCESS":let n=a.payload.messages[a.payload.messages.length-1];if("execute_task"===(0,d.r)(null==n?void 0:n.content).action)return{...e,status:"polling",currentChatId:a.payload.chatId,messages:a.payload.messages,view:"chat"};return{...e,status:"idle",currentChatId:a.payload.chatId,messages:a.payload.messages,view:"chat",holdingMessage:null};case"SET_CHAT_STATE":return{...e,messages:a.payload.messages,currentChatId:a.payload.chatId,chatHistory:a.payload.chatHistory||e.chatHistory};case"START_TASK":return{...e,status:"polling",messages:a.payload.messages,currentChatId:a.payload.chatId};case"TASK_COMPLETE":return{...e,status:"idle",holdingMessage:null,messages:a.payload.messages};case"START_TEAM_BUILDER":return{...e,view:"team_builder",activeDesignSession:null,activeTeam:null,status:"idle",holdingMessage:null};case"OPTIMISTIC_UPDATE_DESIGN_SESSION":let l=e.activeDesignSession?e.activeDesignSession.messages:[],i={...e.activeDesignSession||{designSessionId:"",name:"New Team Design",messages:[]},messages:[...l,a.payload.userMessage]};return{...e,status:"loading",activeDesignSession:i};case"UPDATE_DESIGN_SESSION_SUCCESS":let r=a.payload,o=e.designSessions.map(e=>e.designSessionId===r.designSessionId?r:e);return e.designSessions.some(e=>e.designSessionId===r.designSessionId)||o.unshift(r),{...e,status:"idle",activeDesignSession:r,designSessions:o,view:"team_builder",activeTeam:null};case"ADD_CREATION_MESSAGE":if(!e.activeDesignSession)return e;let c={...e.activeDesignSession,messages:[...e.activeDesignSession.messages,{role:"assistant",content:"Great! I have everything I need. Creating your new team..."}]};return{...e,status:"loading",activeDesignSession:c};case"LOAD_DESIGN_SESSION":return{...e,view:"team_builder",activeDesignSession:a.payload,activeTeam:null,status:"idle"};case"FINISH_TEAM_BUILDER":return{...e,status:"idle",teams:a.payload.teams,designSessions:a.payload.designSessions,activeTeam:a.payload.newTeam,activeDesignSession:null,view:"team_management"};case"OPEN_DIALOG":return{...e,dialog:a.payload.dialog,chatToEdit:a.payload.chat||null,agentToDelete:a.payload.agent||null,designSessionToDelete:a.payload.designSession||null,teamToEdit:a.payload.team||null};case"CLOSE_DIALOG":return{...e,dialog:"none",chatToEdit:null,agentToDelete:null,designSessionToDelete:null,teamToEdit:null};case"UPDATE_TEAMS_LIST":return{...e,teams:a.payload};case"UPDATE_ACTIVE_TEAM":let m=e.teams.map(e=>e.teamId===a.payload.teamId?a.payload:e);return{...e,status:"idle",activeTeam:a.payload,teams:m};case"UPDATE_CHAT_HISTORY":return{...e,chatHistory:a.payload};case"UPDATE_AGENTS":return{...e,agents:a.payload};case"UPDATE_DESIGN_SESSIONS":return{...e,designSessions:a.payload};default:return e}}let eM=()=>{var e;let[a,t]=(0,n.useReducer)(eR,eO),s=(0,n.useRef)(null),l="https://idx-ai-designer-backend-82522688-534939227554.australia-southeast1.run.app",i=(0,n.useCallback)(async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let t=await fetch(e,{...a,headers:{...a.headers,"Content-Type":"application/json"}});if(!t.ok&&202!==t.status){let e=await t.text();throw Error("Request failed: ".concat(t.status," ").concat(e))}let s=204===t.status?null:await t.json();return{success:!0,status:t.status,body:s}}catch(e){return console.error("Fetch error:",e),t({type:"SET_ERROR",payload:e.message||"A network error occurred."}),null}},[]),r=(0,n.useCallback)(()=>{s.current&&(clearInterval(s.current),s.current=null)},[]),o=(0,n.useCallback)(async e=>{var s,n,o;let c=await i("".concat(l,"/chats/").concat(e));if(null==c||null==(s=c.body)?void 0:s.messages){let e=(null==(n=c.body.messages[c.body.messages.length-1])?void 0:n.content)||"";if("execute_task"!==(0,d.r)(e).action){t({type:"TASK_COMPLETE",payload:{messages:c.body.messages}});let e=await i("".concat(l,"/teams/").concat(null==(o=a.activeTeam)?void 0:o.teamId,"/chats"));(null==e?void 0:e.body)&&t({type:"UPDATE_CHAT_HISTORY",payload:e.body}),r()}}},[i,r,null==(e=a.activeTeam)?void 0:e.teamId]);(0,n.useEffect)(()=>("polling"===a.status&&a.currentChatId&&(r(),s.current=setInterval(()=>o(a.currentChatId),3e3)),()=>r()),[a.status,a.currentChatId,o,r]);let c=(0,n.useCallback)(async e=>{if(!e)return;t({type:"SET_STATUS",payload:"loading"});let[a,s]=await Promise.all([i("".concat(l,"/teams/").concat(e,"/chats")),i("".concat(l,"/teams/").concat(e,"/agents"))]);(null==a?void 0:a.body)&&(null==s?void 0:s.body)&&t({type:"FETCH_TEAM_DATA_SUCCESS",payload:{chatHistory:a.body,agents:s.body}})},[i]),m=(0,n.useCallback)(async()=>{t({type:"SET_STATUS",payload:"loading"});let[e,a]=await Promise.all([i("".concat(l,"/teams")),i("".concat(l,"/team-builder/sessions"))]);(null==e?void 0:e.body)&&(null==a?void 0:a.body)&&t({type:"INITIAL_LOAD_SUCCESS",payload:{teams:e.body,designSessions:a.body}})},[i]);(0,n.useEffect)(()=>{m()},[m]),(0,n.useEffect)(()=>{a.activeTeam&&("chat"===a.view||"team_management"===a.view)&&(r(),c(a.activeTeam.teamId))},[a.activeTeam,a.view,c,r]);let u=()=>{r(),t({type:"START_NEW_CHAT"})},h=(0,n.useCallback)(async e=>{var a;r(),t({type:"SET_STATUS",payload:"loading"});let s=await i("".concat(l,"/chats/").concat(e));(null==s||null==(a=s.body)?void 0:a.messages)&&t({type:"LOAD_CHAT_SUCCESS",payload:{chatId:e,messages:s.body.messages}})},[i,r]),g=async e=>{var s,n,r;if(!e||!a.activeTeam)return;let o=!a.currentChatId,d=o?a.messages[0]:null;t({type:"SET_CHAT_STATE",payload:{messages:[...a.messages,{role:"user",content:e}],chatId:a.currentChatId}}),t({type:"SET_STATUS",payload:"loading"});let c=await i("".concat(l,"/teams/").concat(a.activeTeam.teamId,"/chats"),{method:"POST",body:JSON.stringify({message:e,chatId:a.currentChatId,isNewChat:o})});if(!c)return void t({type:"SET_STATUS",payload:"idle"});if(202===c.status){let e=null==(n=c.body)?void 0:n.chatId,s=await i("".concat(l,"/chats/").concat(e));if(e&&(null==s||null==(r=s.body)?void 0:r.messages)){if(t({type:"START_TASK",payload:{chatId:e,messages:s.body.messages}}),o){let e=await i("".concat(l,"/teams/").concat(a.activeTeam.teamId,"/chats"));(null==e?void 0:e.body)&&t({type:"UPDATE_CHAT_HISTORY",payload:e.body})}}else t({type:"SET_ERROR",payload:"Failed to get chat state after starting task."})}else if(200===c.status&&(null==(s=c.body)?void 0:s.messages)){if(t({type:"SET_CHAT_STATE",payload:{messages:o&&d?[d,...c.body.messages]:c.body.messages,chatId:c.body.chatId}}),t({type:"SET_STATUS",payload:"idle"}),o){let e=await i("".concat(l,"/teams/").concat(a.activeTeam.teamId,"/chats"));(null==e?void 0:e.body)&&t({type:"UPDATE_CHAT_HISTORY",payload:e.body})}}else t({type:"SET_STATUS",payload:"idle"})},x=async e=>{var s,n,r,o;if(!e)return;let d={role:"user",content:e};t({type:"OPTIMISTIC_UPDATE_DESIGN_SESSION",payload:{userMessage:d}});let c=JSON.stringify({messages:[...(null==(s=a.activeDesignSession)?void 0:s.messages)||[],d],designSessionId:null==(n=a.activeDesignSession)?void 0:n.designSessionId}),m=await i("".concat(l,"/team-builder/chat"),{method:"POST",body:c});if(m&&m.body){let e=m.body,a=((null==(r=e.messages[e.messages.length-1])?void 0:r.content)||"").match(/```json\s*([\s\S]*?)\s*```/);if(a&&a[1])try{let s=JSON.parse(a[1]);if(s.team_name&&Array.isArray(s.agents)){t({type:"ADD_CREATION_MESSAGE",payload:{designSessionId:e.designSessionId}});let a=JSON.stringify({...s,designSessionId:e.designSessionId}),n=await i("".concat(l,"/team-builder/create"),{method:"POST",body:a});if(n&&n.body.teamId){let[e,a]=await Promise.all([i("".concat(l,"/teams")),i("".concat(l,"/team-builder/sessions"))]);if((null==e?void 0:e.body)&&(null==a?void 0:a.body)){let s=e.body.find(e=>e.teamId===n.body.teamId);s&&t({type:"FINISH_TEAM_BUILDER",payload:{newTeam:s,teams:e.body,designSessions:a.body}})}}else t({type:"SET_ERROR",payload:"Failed to create team: ".concat((null==n||null==(o=n.body)?void 0:o.error)||"Unknown error")})}else t({type:"UPDATE_DESIGN_SESSION_SUCCESS",payload:e})}catch(a){t({type:"UPDATE_DESIGN_SESSION_SUCCESS",payload:e})}else t({type:"UPDATE_DESIGN_SESSION_SUCCESS",payload:e})}},p=async e=>{let s=[...a.messages].reverse().find(e=>"user"===e.role);if(!s)return;let n=a.messages.filter(e=>!(0,d.r)(e.content).actions);if("confirm_redirect"===e){t({type:"SET_STATUS",payload:"loading"}),t({type:"SET_CHAT_STATE",payload:{messages:n,chatId:a.currentChatId}});let e=JSON.stringify({messages:[],initial_user_idea:s.content}),r=await i("".concat(l,"/team-builder/chat"),{method:"POST",body:e});r&&r.body&&t({type:"UPDATE_DESIGN_SESSION_SUCCESS",payload:r.body})}else"cancel_redirect"===e&&t({type:"SET_CHAT_STATE",payload:{messages:[...n,{role:"assistant",content:"Okay, let's stay here. What else can I help you with?"}],chatId:a.currentChatId}})},f=async e=>{if(!a.activeTeam||e===a.activeTeam.mission)return;t({type:"SET_STATUS",payload:"loading"});let s=JSON.stringify({mission:e}),n=await i("".concat(l,"/teams/").concat(a.activeTeam.teamId),{method:"PUT",body:s});n&&n.success&&t({type:"UPDATE_ACTIVE_TEAM",payload:{...a.activeTeam,mission:e}})},y=()=>t({type:"CLOSE_DIALOG"}),v=async e=>{if(!e||!a.chatToEdit)return;let{chatId:s}=a.chatToEdit,n=await i("".concat(l,"/chats/").concat(s,"/rename"),{method:"POST",body:JSON.stringify({new_title:e})});n&&n.success&&(t({type:"UPDATE_CHAT_HISTORY",payload:a.chatHistory.map(a=>a.chatId===s?{...a,title:e}:a)}),y())},j=async()=>{if(!a.chatToEdit||!a.activeTeam)return;let{chatId:e}=a.chatToEdit,s=await i("".concat(l,"/chats/").concat(e),{method:"DELETE"});s&&s.success&&(t({type:"UPDATE_CHAT_HISTORY",payload:a.chatHistory.filter(a=>a.chatId!==e)}),a.currentChatId===e&&u(),y())},N=async(e,s)=>{if(!a.activeTeam)return;t({type:"SET_STATUS",payload:"loading"});let n=!s,r=n?"".concat(l,"/teams/").concat(a.activeTeam.teamId,"/agents"):"".concat(l,"/teams/").concat(a.activeTeam.teamId,"/agents/").concat(s),o=await i(r,{method:n?"POST":"PUT",body:JSON.stringify(e)});if(o&&o.success){let e=await i("".concat(l,"/teams/").concat(a.activeTeam.teamId,"/agents"));e&&e.body&&t({type:"UPDATE_AGENTS",payload:e.body})}t({type:"SET_STATUS",payload:"idle"})},T=async()=>{if(!a.activeTeam||!a.agentToDelete)return;let{agentId:e}=a.agentToDelete,s=await i("".concat(l,"/teams/").concat(a.activeTeam.teamId,"/agents/").concat(e),{method:"DELETE"});s&&s.success&&(t({type:"UPDATE_AGENTS",payload:a.agents.filter(a=>a.agentId!==e)}),y())},b=async()=>{if(!a.designSessionToDelete)return;let{designSessionId:e}=a.designSessionToDelete,s=await i("".concat(l,"/team-builder/sessions/").concat(e),{method:"DELETE"});if(s&&s.success){var n;t({type:"UPDATE_DESIGN_SESSIONS",payload:a.designSessions.filter(a=>a.designSessionId!==e)}),(null==(n=a.activeDesignSession)?void 0:n.designSessionId)===e&&t({type:"SWITCH_MODE",payload:"team"}),y()}},S=async e=>{var s;if(!e||!a.teamToEdit)return;let{teamId:n}=a.teamToEdit;t({type:"UPDATE_TEAMS_LIST",payload:a.teams.map(a=>a.teamId===n?{...a,name:e}:a)}),(null==(s=a.activeTeam)?void 0:s.teamId)===n&&t({type:"SET_ACTIVE_TEAM_FOR_MANAGEMENT",payload:{...a.activeTeam,name:e}}),y()},w=async()=>{if(!a.teamToEdit)return;let{teamId:e}=a.teamToEdit,s=await i("".concat(l,"/teams/").concat(e),{method:"DELETE"});if(s&&s.success){var n;let s=a.teams.filter(a=>a.teamId!==e);t({type:"UPDATE_TEAMS_LIST",payload:s}),(null==(n=a.activeTeam)?void 0:n.teamId)===e&&t({type:"SET_ACTIVE_TEAM_FOR_MANAGEMENT",payload:s[0]||null}),y()}};return{state:a,handleSendMessage:g,handleSubmitTeamBuilder:x,handleSetActiveTeam:e=>{var s;let n="string"==typeof e?a.teams.find(a=>a.teamId===e):e;n&&n.teamId!==(null==(s=a.activeTeam)?void 0:s.teamId)&&("team_management"===a.view?t({type:"SET_ACTIVE_TEAM_FOR_MANAGEMENT",payload:n}):t({type:"SET_ACTIVE_TEAM_FOR_CHAT",payload:n}))},handleModeChange:e=>t({type:"SWITCH_MODE",payload:e}),handleNewChat:u,handleLoadChat:h,handleStartTeamBuilder:()=>t({type:"START_TEAM_BUILDER"}),handleLoadDesignSession:e=>t({type:"LOAD_DESIGN_SESSION",payload:e}),handleUpdateMission:f,handleChatAction:p,handleDialogOpen:(e,a)=>{t({type:"OPEN_DIALOG",payload:{dialog:e,...a}})},handleDialogClose:y,handleRenameChat:v,handleDeleteChat:j,handleSaveAgent:N,handleConfirmDeleteAgent:T,handleConfirmDeleteDesignSession:b,handleRenameTeam:S,handleConfirmDeleteTeam:w}},eU=()=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,s.jsx)("div",{className:"text-gray-400 mb-4 h-12 w-12"}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Team Management"}),(0,s.jsx)("p",{className:"mt-2 text-lg text-gray-500 dark:text-gray-400",children:"Select a team from the sidebar to view and manage its agents."})]});function eP(){var e,a,t,l;let{state:i,handleSendMessage:r,handleSubmitTeamBuilder:o,handleSetActiveTeam:c,handleModeChange:u,handleNewChat:h,handleLoadChat:g,handleStartTeamBuilder:x,handleLoadDesignSession:p,handleUpdateMission:f,handleChatAction:y,handleDialogOpen:v,handleDialogClose:j,handleRenameChat:N,handleDeleteChat:T,handleSaveAgent:b,handleConfirmDeleteAgent:S,handleConfirmDeleteDesignSession:w,handleRenameTeam:_,handleConfirmDeleteTeam:E}=eM(),[A,C]=(0,n.useState)(""),[I,k]=(0,n.useState)(""),[D,O]=(0,n.useState)(null),R=()=>{r(A),C("")},M=e=>{e.preventDefault(),o(A),C("")},U=async e=>{await b(e,null==D?void 0:D.agentId),O(null)},P="team_management"===i.view||"team_builder"===i.view?"team":"chat";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(X,{activeMode:P,setActiveMode:u,teams:i.teams,designSessions:i.designSessions,activeTeam:i.activeTeam,activeDesignSession:i.activeDesignSession,chatHistory:i.chatHistory,currentChatId:i.currentChatId,onSetActiveTeam:c,onNewChat:h,onLoadChat:g,onCreateTeamWithAIClick:x,onLoadDesignSession:p,onDeleteDesignSession:e=>v("delete_design_session",{designSession:e}),onRenameChat:e=>{v("rename_chat",{chat:e}),k(e.title)},onDeleteChat:e=>v("delete_chat",{chat:e}),onUpdateMission:f,children:(()=>{var e,a;if("error"===i.status)return(0,s.jsxs)("div",{className:"p-8 text-red-500",children:["Error: ",i.error]});if("loading"===i.status&&!i.activeTeam&&!i.activeDesignSession&&"chat"!==i.view)return(0,s.jsx)("div",{className:"p-8",children:"Loading..."});let t="loading"===i.status||"polling"===i.status,n="polling"===i.status?null==(e=i.messages.find(e=>{var a;return(null==(a=(0,d.r)(e.content))?void 0:a.action)==="execute_task"}))?void 0:e.content:null,l=null==(a=(0,d.r)(n))?void 0:a.holding_message,r=i.messages.filter(e=>{var a;return(null==(a=(0,d.r)(e.content))?void 0:a.action)!=="execute_task"});switch(i.view){case"welcome":default:return(0,s.jsx)(ey,{});case"chat":if(!i.activeTeam)return(0,s.jsx)(ey,{});return(0,s.jsx)(ev,{messages:r,currentInput:A,setCurrentInput:C,isLoading:t,holdingMessage:l,handleSendMessage:R,onAction:y});case"team_management":if(!i.activeTeam)return(0,s.jsx)(eU,{});return(0,s.jsx)(ej,{team:i.activeTeam,agents:i.agents,isLoading:t,onCreateAgent:()=>O({agentId:"",name:"",system_prompt:""}),onEditAgent:O,onUpdateMission:f,onRenameTeam:()=>{i.activeTeam&&v("rename_team",{team:i.activeTeam})},onDeleteTeam:()=>{i.activeTeam&&v("delete_team",{team:i.activeTeam})}});case"team_builder":let o=i.activeDesignSession?i.activeDesignSession.messages:[];return(0,s.jsx)(ev,{messages:o,currentInput:A,setCurrentInput:C,isLoading:t,holdingMessage:null,handleSendMessage:()=>M(new Event("submit")),onAction:y})}})()}),(0,s.jsx)(eb,{open:"rename_chat"===i.dialog,onOpenChange:j,children:(0,s.jsxs)(e_,{children:[(0,s.jsx)(eE,{children:(0,s.jsx)(eC,{children:"Rename Chat"})}),(0,s.jsx)(ek,{value:I,onChange:e=>k(e.target.value),placeholder:"Enter new title..."}),(0,s.jsxs)(eA,{children:[(0,s.jsx)(m,{variant:"outline",onClick:j,children:"Cancel"}),(0,s.jsx)(m,{onClick:()=>{N(I),k("")},children:"Rename"})]})]})}),(0,s.jsx)(eb,{open:"delete_chat"===i.dialog,onOpenChange:j,children:(0,s.jsxs)(e_,{children:[(0,s.jsx)(eE,{children:(0,s.jsx)(eC,{children:"Delete Chat"})}),(0,s.jsxs)("p",{children:['Are you sure you want to delete "',null==(e=i.chatToEdit)?void 0:e.title,'"?']}),(0,s.jsxs)(eA,{children:[(0,s.jsx)(m,{variant:"outline",onClick:j,children:"Cancel"}),(0,s.jsx)(m,{variant:"destructive",onClick:T,children:"Delete"})]})]})}),(0,s.jsx)(eb,{open:"delete_agent"===i.dialog,onOpenChange:j,children:(0,s.jsxs)(e_,{children:[(0,s.jsx)(eE,{children:(0,s.jsx)(eC,{children:"Delete Agent"})}),(0,s.jsxs)("p",{children:['Are you sure you want to permanently delete the agent "',null==(a=i.agentToDelete)?void 0:a.name,'"?']}),(0,s.jsxs)(eA,{children:[(0,s.jsx)(m,{variant:"outline",onClick:j,children:"Cancel"}),(0,s.jsx)(m,{variant:"destructive",onClick:S,children:"Delete"})]})]})}),(0,s.jsx)(eb,{open:"delete_design_session"===i.dialog,onOpenChange:j,children:(0,s.jsxs)(e_,{children:[(0,s.jsx)(eE,{children:(0,s.jsx)(eC,{children:"Delete Design Session"})}),(0,s.jsxs)("p",{children:['Are you sure you want to permanently delete the design session "',null==(t=i.designSessionToDelete)?void 0:t.name,'"?']}),(0,s.jsxs)(eA,{children:[(0,s.jsx)(m,{variant:"outline",onClick:j,children:"Cancel"}),(0,s.jsx)(m,{variant:"destructive",onClick:w,children:"Delete"})]})]})}),(0,s.jsx)(eb,{open:"rename_team"===i.dialog,onOpenChange:j,children:(0,s.jsxs)(e_,{children:[(0,s.jsx)(eE,{children:(0,s.jsx)(eC,{children:"Rename Team"})}),(0,s.jsx)(ek,{value:I,onChange:e=>k(e.target.value),placeholder:"Enter new team name..."}),(0,s.jsxs)(eA,{children:[(0,s.jsx)(m,{variant:"outline",onClick:j,children:"Cancel"}),(0,s.jsx)(m,{onClick:()=>{_(I),k("")},children:"Rename"})]})]})}),(0,s.jsx)(eb,{open:"delete_team"===i.dialog,onOpenChange:j,children:(0,s.jsxs)(e_,{children:[(0,s.jsx)(eE,{children:(0,s.jsx)(eC,{children:"Delete Team"})}),(0,s.jsxs)(eI,{children:['Are you sure you want to permanently delete the team "',null==(l=i.teamToEdit)?void 0:l.name,'"? This action cannot be undone.']}),(0,s.jsxs)(eA,{children:[(0,s.jsx)(m,{variant:"outline",onClick:j,children:"Cancel"}),(0,s.jsx)(m,{variant:"destructive",onClick:E,children:"Delete"})]})]})}),(0,s.jsx)(eD,{isOpen:!!D,onOpenChange:e=>{e||O(null)},agentToEdit:D,onSave:U,onDelete:e=>{v("delete_agent",{agent:e})}})]})}},9434:(e,a,t)=>{"use strict";t.d(a,{cn:()=>l,r:()=>i});var s=t(2596),n=t(9688);function l(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,n.QP)((0,s.$)(a))}function i(e){let a={action:"conversational",holding_message:null,task_for_team:null,text:e,actions:null};if(!e)return{...a,action:"unknown"};let t=e.match(/```json\s*([\s\S]*?)\s*```/),s=t?t[1]:e;try{let e=JSON.parse(s);if("object"!=typeof e||null===e)return a;if("execute_task"===e.action&&e.holding_message&&e.task_for_team)return{action:"execute_task",holding_message:e.holding_message,task_for_team:e.task_for_team,text:null,actions:null};if("redirect_to_team_builder"===e.action&&e.message&&Array.isArray(e.actions))return{action:"redirect_to_team_builder",holding_message:null,task_for_team:null,text:e.message,actions:e.actions};if(e.text&&Array.isArray(e.actions))return{action:"redirect_to_team_builder",holding_message:null,task_for_team:null,text:e.text,actions:e.actions};return a}catch(e){return a}}}},e=>{var a=a=>e(e.s=a);e.O(0,[965,313,441,684,358],()=>a(5694)),_N_E=e.O()}]);