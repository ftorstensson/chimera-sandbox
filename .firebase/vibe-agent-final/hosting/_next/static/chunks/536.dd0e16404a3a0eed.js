"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{4536:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ey});var s=a(5155),n=a(2115),r=a(1362);function i(e){let{children:t,...a}=e;return(0,s.jsx)(r.N,{...a,children:t})}var l=a(4253),o=a(2085),d=a(9434);let c=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=n.forwardRef((e,t)=>{let{className:a,variant:n,size:r,asChild:i=!1,...o}=e,m=i?l.DX:"button";return(0,s.jsx)(m,{className:(0,d.cn)(c({variant:n,size:r,className:a})),ref:t,...o})});m.displayName="Button";var u=a(9864),h=a(124);let x=(0,o.F)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});n.forwardRef((e,t)=>{let{className:a,variant:n,size:r,...i}=e;return(0,s.jsx)(h.b,{ref:t,className:(0,d.cn)(x({variant:n,size:r,className:a})),...i})}).displayName=h.b.displayName;let g=n.createContext({size:"default",variant:"default"}),f=n.forwardRef((e,t)=>{let{className:a,variant:n,size:r,children:i,...l}=e;return(0,s.jsx)(u.bL,{ref:t,className:(0,d.cn)("flex items-center justify-center gap-1",a),...l,children:(0,s.jsx)(g.Provider,{value:{variant:n,size:r},children:i})})});f.displayName=u.bL.displayName;let p=n.forwardRef((e,t)=>{let{className:a,children:r,variant:i,size:l,...o}=e,c=n.useContext(g);return(0,s.jsx)(u.q7,{ref:t,className:(0,d.cn)(x({variant:c.variant||i,size:c.size||l}),a),...o,children:r})});p.displayName=u.q7.displayName;var y=a(4011),v=a(9556),b=a(7381),j=a(518);let N=y.bL;y.YJ;let w=y.WT,k=n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,s.jsxs)(y.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...r,children:[n,(0,s.jsx)(y.In,{asChild:!0,children:(0,s.jsx)(v.A,{className:"h-4 w-4 opacity-50"})})]})});k.displayName=y.l9.displayName;let C=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(y.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,s.jsx)(b.A,{className:"h-4 w-4"})})});C.displayName=y.PP.displayName;let S=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(y.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,s.jsx)(v.A,{className:"h-4 w-4"})})});S.displayName=y.wn.displayName;let T=n.forwardRef((e,t)=>{let{className:a,children:n,position:r="popper",...i}=e;return(0,s.jsx)(y.ZL,{children:(0,s.jsxs)(y.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...i,children:[(0,s.jsx)(C,{}),(0,s.jsx)(y.LM,{className:(0,d.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,s.jsx)(S,{})]})})});T.displayName=y.UC.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(y.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...n})}).displayName=y.JU.displayName;let A=n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,s.jsxs)(y.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(y.VF,{children:(0,s.jsx)(j.A,{className:"h-4 w-4"})})}),(0,s.jsx)(y.p4,{children:n})]})});A.displayName=y.q7.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(y.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...n})}).displayName=y.wv.displayName;var I=a(9615),_=a(3158),z=a(154);let R=I.bL,D=I.l9;I.YJ,I.ZL,I.Pb,I.z6,n.forwardRef((e,t)=>{let{className:a,inset:n,children:r,...i}=e;return(0,s.jsxs)(I.ZP,{ref:t,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",a),...i,children:[r,(0,s.jsx)(_.A,{className:"ml-auto"})]})}).displayName=I.ZP.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(I.G5,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})}).displayName=I.G5.displayName;let M=n.forwardRef((e,t)=>{let{className:a,sideOffset:n=4,...r}=e;return(0,s.jsx)(I.ZL,{children:(0,s.jsx)(I.UC,{ref:t,sideOffset:n,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});M.displayName=I.UC.displayName;let E=n.forwardRef((e,t)=>{let{className:a,inset:n,...r}=e;return(0,s.jsx)(I.q7,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",a),...r})});E.displayName=I.q7.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,checked:r,...i}=e;return(0,s.jsxs)(I.H_,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(I.VF,{children:(0,s.jsx)(j.A,{className:"h-4 w-4"})})}),n]})}).displayName=I.H_.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,s.jsxs)(I.hN,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(I.VF,{children:(0,s.jsx)(z.A,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=I.hN.displayName,n.forwardRef((e,t)=>{let{className:a,inset:n,...r}=e;return(0,s.jsx)(I.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",a),...r})}).displayName=I.JU.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(I.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...n})}).displayName=I.wv.displayName;var P=a(4063),L=a(8046),H=a(3561),U=a(8763),J=a(7223),F=a(286),O=a(4601),q=a(6936),V=a(8027),W=a(8271),B=a(8341);let Z="hover:bg-gray-200 dark:hover:bg-zinc-800",G="!bg-gray-300 text-gray-900 dark:!bg-zinc-700 dark:text-gray-100",Y=e=>{var t;return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"p-2 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)(P.A,{className:"mx-auto h-8 w-8 mb-2"}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Designer Chat"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pick the multi-agent team that you want to work with"})]}),(0,s.jsxs)(N,{value:(null==(t=e.activeTeam)?void 0:t.teamId)||"",onValueChange:e.onTeamSelect,children:[(0,s.jsx)(k,{className:"w-full focus:ring-indigo-500 ".concat(G),children:(0,s.jsx)(w,{placeholder:"Select a team..."})}),(0,s.jsx)(T,{className:"bg-white text-gray-900 dark:bg-zinc-800 dark:text-white",children:e.teams.map(e=>(0,s.jsx)(A,{value:e.teamId,children:e.name},e.teamId))})]}),(0,s.jsxs)(m,{variant:"ghost",className:"w-full justify-start mt-2 ".concat(Z),onClick:e.onNewChat,children:[(0,s.jsx)(L.A,{className:"mr-2 h-4 w-4"})," New Design Chat"]})]}),(0,s.jsxs)("div",{className:"flex-grow overflow-y-auto mt-4 pt-4 border-t border-gray-200 dark:border-zinc-800",children:[(0,s.jsx)("p",{className:"px-3 text-xs uppercase text-gray-500 tracking-wider",children:"Recent Design Chats"}),(0,s.jsx)("nav",{className:"mt-2 space-y-1 px-2",children:e.chatHistory.length>0?e.chatHistory.map(t=>(0,s.jsxs)("div",{className:"group flex items-center rounded-md cursor-pointer ".concat(Z," ").concat(e.currentChatId===t.chatId?G:""),onClick:()=>e.onLoadChat(t.chatId),children:[(0,s.jsx)("span",{className:"flex-grow truncate px-2 py-2",children:t.title}),(0,s.jsxs)(R,{children:[(0,s.jsx)(D,{asChild:!0,onClick:e=>e.stopPropagation(),children:(0,s.jsx)(m,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0 opacity-0 group-hover:opacity-100",children:(0,s.jsx)(H.A,{size:16})})}),(0,s.jsxs)(M,{children:[(0,s.jsxs)(E,{onClick:a=>{a.stopPropagation(),e.onRenameChat(t)},children:[(0,s.jsx)(U.A,{className:"mr-2 h-4 w-4"}),"Rename"]}),(0,s.jsxs)(E,{className:"text-red-500",onClick:a=>{a.stopPropagation(),e.onDeleteChat(t)},children:[(0,s.jsx)(J.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]},t.chatId)):(0,s.jsx)("p",{className:"px-3 py-2 text-sm text-gray-500",children:"No chats for this team yet."})})]})]})},K=e=>(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"p-2 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)(F.A,{className:"mx-auto h-8 w-8 mb-2"}),(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Team Building"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Build and manage your multi-agent teams."})]}),(0,s.jsxs)(m,{variant:"outline",className:"w-full justify-start ".concat(Z," text-indigo-500 border-indigo-500/50 hover:text-indigo-400"),onClick:e.onCreateTeamWithAIClick,children:[(0,s.jsx)(O.A,{className:"mr-2 h-4 w-4"})," New Team with AI"]})]}),e.designSessions.length>0&&(0,s.jsxs)("div",{className:"flex-shrink-0 mt-4 pt-4 border-t border-gray-200 dark:border-zinc-800",children:[(0,s.jsx)("p",{className:"px-3 text-xs uppercase text-gray-500 tracking-wider",children:"In Progress"}),(0,s.jsx)("nav",{className:"mt-2 space-y-1 px-2",children:e.designSessions.map(t=>{var a,n;return(0,s.jsxs)("div",{className:"group flex items-center rounded-md cursor-pointer ".concat(Z," ").concat((null==(a=e.activeDesignSession)?void 0:a.designSessionId)===t.designSessionId?G:""),children:[(0,s.jsx)("span",{className:"flex-grow truncate px-2 py-2 ".concat((null==(n=e.activeDesignSession)?void 0:n.designSessionId)===t.designSessionId?"animate-pulse":""),onClick:()=>e.onLoadDesignSession(t),children:t.name}),(0,s.jsxs)(R,{children:[(0,s.jsx)(D,{asChild:!0,onClick:e=>e.stopPropagation(),children:(0,s.jsx)(m,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0 opacity-0 group-hover:opacity-100",children:(0,s.jsx)(H.A,{size:16})})}),(0,s.jsx)(M,{children:(0,s.jsxs)(E,{className:"text-red-500",onClick:a=>{a.stopPropagation(),e.onDeleteDesignSession(t)},children:[(0,s.jsx)(J.A,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})]},t.designSessionId)})})]}),(0,s.jsxs)("div",{className:"flex-grow overflow-y-auto mt-4 pt-4 border-t border-gray-200 dark:border-zinc-800",children:[(0,s.jsx)("p",{className:"px-3 text-xs uppercase text-gray-500 tracking-wider",children:"Manage Teams & Agents"}),(0,s.jsx)("nav",{className:"mt-2 space-y-1 px-2",children:e.teams.map(t=>{var a;return(0,s.jsx)(m,{variant:"ghost",className:"w-full justify-start ".concat(Z," ").concat((null==(a=e.activeTeam)?void 0:a.teamId)===t.teamId?G:""),onClick:()=>e.onTeamSelect(t),children:t.name},t.teamId)})})]})]}),Q=e=>{let{theme:t,setTheme:a}=(0,r.D)(),[i,l]=n.useState(!0);return(0,s.jsxs)("div",{className:"flex h-screen bg-white dark:bg-[#171719] text-gray-900 dark:text-gray-100",children:[(0,s.jsx)("aside",{className:"flex flex-col flex-shrink-0 bg-gray-100 dark:bg-[#141415] transition-all duration-300 ".concat(i?"w-72 p-2":"w-0"),children:(0,s.jsxs)("div",{className:"flex flex-col flex-grow overflow-hidden",children:[(0,s.jsx)("div",{className:"flex-shrink-0 p-2 transition-opacity duration-200 ".concat(i?"opacity-100":"opacity-0"),children:(0,s.jsxs)(f,{type:"single",value:e.activeMode,onValueChange:t=>{t&&e.setActiveMode(t)},className:"w-full grid grid-cols-2",children:[" ",(0,s.jsx)(p,{value:"chat","aria-label":"Toggle chat mode",className:"chat"===e.activeMode?G:Z,children:"CHAT"})," ",(0,s.jsx)(p,{value:"team","aria-label":"Toggle team mode",className:"team"===e.activeMode?G:Z,children:"TEAM"})," "]})}),(0,s.jsx)("div",{className:"flex-grow mt-2 overflow-y-auto transition-opacity duration-200 ".concat(i?"opacity-100":"opacity-0"),children:"chat"===e.activeMode?(0,s.jsx)(Y,{...e,onTeamSelect:e.onSetActiveTeam}):(0,s.jsx)(K,{...e,onTeamSelect:e.onSetActiveTeam})}),(0,s.jsxs)("div",{className:"flex-shrink-0 border-t border-gray-200 dark:border-zinc-800 mt-2 pt-2 flex items-center justify-between transition-opacity duration-200 ".concat(i?"opacity-100":"opacity-0"),children:[" ",(0,s.jsxs)(m,{variant:"ghost",size:"icon",onClick:()=>a("dark"===t?"light":"dark"),className:Z,children:[" ",(0,s.jsx)(q.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"})," ",(0,s.jsx)(V.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})," "]})," ",(0,s.jsxs)(m,{variant:"ghost",className:"text-sm ".concat(Z),children:[" ",(0,s.jsx)(W.A,{className:"mr-2 h-4 w-4"})," Settings "]})," "]})]})}),(0,s.jsxs)("div",{className:"flex flex-col flex-1 h-full min-w-0",children:[" ",(0,s.jsxs)("header",{className:"flex items-center p-2 flex-shrink-0 border-b border-gray-200 dark:border-zinc-800",children:[" ",(0,s.jsxs)(m,{variant:"ghost",size:"icon",onClick:()=>l(!i),className:"mr-2 text-gray-500",children:[" ",(0,s.jsx)(B.A,{size:24})," "]})," ",(0,s.jsx)("h1",{className:"text-xl font-semibold",children:"GoddessAI - the Everything Agency"})," "]})," ",(0,s.jsxs)("main",{className:"flex-1 overflow-y-auto",children:[" ",e.children," "]})," "]})]})};function X(e){return(0,s.jsxs)(i,{attribute:"class",defaultTheme:"dark",enableSystem:!0,disableTransitionOnChange:!0,children:[" ",(0,s.jsx)(Q,{...e})," "]})}let $=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...n})});$.displayName="Card";let ee=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...n})});ee.displayName="CardHeader";let et=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("font-semibold leading-none tracking-tight",a),...n})});et.displayName="CardTitle";let ea=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...n})});ea.displayName="CardDescription";let es=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("p-6 pt-0",a),...n})});es.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter";let en=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});en.displayName="Textarea";var er=a(792);let ei=n.memo(e=>{let{children:t}=e,a="string"==typeof t?t:String(t);return(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"prose dark:prose-invert max-w-none text-foreground/90",children:(0,s.jsx)(er.oz,{children:a})})})});function el(e){let{children:t}=e;return(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("div",{className:"bg-gray-200 text-gray-800 px-4 py-3 rounded-2xl rounded-br-none w-fit max-w-[90%]",children:t})})}ei.displayName="AssistantMessage";let eo=e=>{let{message:t}=e;return(0,s.jsx)("div",{className:"flex justify-center items-center p-4",children:(0,s.jsx)($,{className:"bg-gray-100 dark:bg-zinc-800 p-2 rounded-lg max-w-xs animate-pulse",children:(0,s.jsx)(es,{className:"p-2",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("span",{className:"h-2 w-2 bg-gray-500 dark:bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),(0,s.jsx)("span",{className:"h-2 w-2 bg-gray-500 dark:bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),(0,s.jsx)("span",{className:"h-2 w-2 bg-gray-500 dark:bg-gray-400 rounded-full animate-bounce"})]}),t&&(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:t})]})})})})},ed=e=>{let{onStartChat:t,activeTeam:a}=e;return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-center bg-gray-50 dark:bg-zinc-900 p-8",children:(0,s.jsxs)("div",{className:"max-w-md",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900 dark:text-gray-100",children:"Welcome to The Everything Agency"}),(0,s.jsx)("p",{className:"mt-4 text-lg text-gray-600 dark:text-gray-400",children:"This is your collaborative space to create, manage, and deploy teams of specialized AI agents."}),a&&(0,s.jsxs)("p",{className:"mt-2 text-md text-gray-500 dark:text-gray-500",children:["You have the ",(0,s.jsx)("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:a.name})," selected."]}),(0,s.jsx)(m,{onClick:t,className:"mt-6",children:"Start a New Chat"})]})})},ec=e=>{let{messages:t,currentInput:a,setCurrentInput:n,isLoading:r,handleSendMessage:i,onAction:l}=e;return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.map((e,t)=>"user"===e.role?(0,s.jsx)(el,{children:e.content},t):(0,s.jsx)(ei,{children:e.content},t)),r&&(0,s.jsx)(eo,{})]}),(0,s.jsx)("div",{className:"p-4 border-t bg-white dark:bg-zinc-800",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(en,{value:a,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i())},placeholder:"Type your message here...",className:"pr-20",disabled:r}),(0,s.jsx)(m,{onClick:i,className:"absolute right-2 top-1/2 -translate-y-1/2",disabled:r||!a.trim(),children:"Send"})]})})]})},em=e=>{let{team:t,agents:a,isLoading:n,onCreateAgent:r,onEditAgent:i,onUpdateMission:l,onRenameTeam:o,onDeleteTeam:d}=e;return(0,s.jsx)("div",{className:"p-8",children:(0,s.jsxs)($,{children:[(0,s.jsxs)(ee,{children:[(0,s.jsx)(et,{children:t.name}),(0,s.jsxs)(ea,{children:["Mission: ",t.mission]})]}),(0,s.jsxs)(es,{children:[(0,s.jsx)("h3",{className:"font-bold mb-4",children:"Agents"}),n?(0,s.jsx)("p",{children:"Loading agents..."}):(0,s.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,s.jsxs)($,{children:[(0,s.jsxs)(ee,{children:[(0,s.jsx)(et,{children:e.name}),(0,s.jsx)(m,{size:"sm",onClick:()=>i(e),children:"Edit"})]}),(0,s.jsx)(es,{children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.system_prompt})})]},e.agentId))}),(0,s.jsx)(m,{onClick:r,className:"mt-4",children:"Create New Agent"})]})]})})};var eu=a(7650);let eh={view:"welcome",teams:[],designSessions:[],chatHistory:[],agents:[],activeTeam:null,activeDesignSession:null,currentChatId:null,messages:[],renderState:{displayMessages:[]},dialog:"none",chatToEdit:null,agentToDelete:null,designSessionToDelete:null,teamToEdit:null,status:"idle",error:null};class ex{computeRenderState(e){let t=e[e.length-1],a="execute_task"===(0,d.r)(null==t?void 0:t.content).action,s=e;return a&&(s=e.filter(e=>"execute_task"!==(0,d.r)(e.content).action)),{renderState:{displayMessages:s},isPolling:a}}initializeWithData(e,t){this.setState(a=>({...a,teams:e,designSessions:t,status:"idle",activeTeam:a.activeTeam||e[0]||null,view:"welcome"===a.view&&e.length>0?"chat":a.view}))}async fetchTeamDependencies(e,t){this.setState(e=>({...e,status:"loading"}));let[a,s]=await Promise.all([t("/teams/".concat(e,"/chats")),t("/teams/".concat(e,"/agents"))]);(null==a?void 0:a.body)&&(null==s?void 0:s.body)&&this.setState(e=>({...e,status:"idle",chatHistory:a.body,agents:s.body}))}setOptimisticMessage(e){this.setState(t=>{let a=[...t.messages,{role:"user",content:e}];return{...t,status:"loading",messages:a,renderState:{...t.renderState,displayMessages:a}}})}updateChatState(e){let{renderState:t,isPolling:a}=this.computeRenderState(e.messages);this.setState(s=>({...s,status:e.status||(a?"polling":"idle"),currentChatId:e.chatId||s.currentChatId,messages:e.messages,chatHistory:e.newChatHistory||s.chatHistory,renderState:t,view:"chat"}))}startNewChat(){this.setState(e=>({...e,currentChatId:null,messages:[],renderState:{displayMessages:[]},view:"chat",status:"idle"}))}setActiveTeam(e){this.setState(t=>({...t,view:"chat",activeTeam:e,currentChatId:null,messages:[],renderState:{displayMessages:[]},chatHistory:[],agents:[],status:"loading"}))}setError(e){this.setState(t=>({...t,status:"error",error:e}))}setStatus(e){this.setState(t=>({...t,status:e}))}constructor(){this.state=eh,this.listeners=new Set,this.subscribe=e=>(this.listeners.add(e),()=>this.listeners.delete(e)),this.getSnapshot=()=>this.state,this.setState=e=>{this.state=e(this.state),this.listeners.forEach(e=>e())}}}let eg=new ex,ef=()=>{var e;let t=(0,n.useSyncExternalStore)(eg.subscribe,eg.getSnapshot),a="https://idx-ai-designer-backend-82522688-534939227554.australia-southeast1.run.app",s=(0,n.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a=await fetch(e,{...t,headers:{...t.headers,"Content-Type":"application/json"}});if(!a.ok&&202!==a.status){let e=await a.text();throw Error("Request failed: ".concat(a.status," ").concat(e))}let s=204===a.status?null:await a.json();return{success:!0,status:a.status,body:s}}catch(e){return console.error("Fetch error:",e),eg.setError(e.message||"A network error occurred."),null}},[]);(0,n.useEffect)(()=>{(async()=>{eg.setStatus("loading");let[e,t]=await Promise.all([s("".concat(a,"/teams")),s("".concat(a,"/team-builder/sessions"))]);(null==e?void 0:e.body)&&(null==t?void 0:t.body)&&eg.initializeWithData(e.body,t.body)})()},[s]),(0,n.useEffect)(()=>{t.activeTeam&&"team_builder"!==t.view&&"loading"===t.status&&eg.fetchTeamDependencies(t.activeTeam.teamId,e=>s("".concat(a).concat(e)))},[t.activeTeam,t.view,t.status,s]);let r=(0,n.useRef)(null),i=(0,n.useCallback)(()=>{r.current&&(clearInterval(r.current),r.current=null)},[]),l=(0,n.useCallback)(async(e,t)=>{var n;if(!e||!t)return;let r=await s("".concat(a,"/chats/").concat(e));if(!(null==r||null==(n=r.body)?void 0:n.messages))return;let l=r.body.messages,o=l[l.length-1];if(o&&"user"!==o.role&&"execute_task"!==(0,d.r)(o.content).action){i();let n=await s("".concat(a,"/teams/").concat(t,"/chats"));(0,eu.flushSync)(()=>{eg.updateChatState({chatId:e,messages:l,newChatHistory:null==n?void 0:n.body,status:"idle"})})}else eg.updateChatState({messages:l})},[s,i]);(0,n.useEffect)(()=>{var e;let a="polling"===t.status,s=t.currentChatId,n=null==(e=t.activeTeam)?void 0:e.teamId;return a&&s&&n?(i(),r.current=setInterval(()=>l(s,n),3e3)):i(),()=>i()},[t.status,t.currentChatId,null==(e=t.activeTeam)?void 0:e.teamId,l,i]);let o=async e=>{var n,r;if(!e||!t.activeTeam)return;let i=!t.currentChatId;eg.setOptimisticMessage(e);let l=await s("".concat(a,"/teams/").concat(t.activeTeam.teamId,"/chats"),{method:"POST",body:JSON.stringify({message:e,chatId:t.currentChatId})});if(!(null==l||null==(n=l.body)?void 0:n.chatId))return void eg.setError("Backend did not return a valid chat ID.");let o=l.body.chatId,[d,c]=await Promise.all([s("".concat(a,"/chats/").concat(o)),i?s("".concat(a,"/teams/").concat(t.activeTeam.teamId,"/chats")):Promise.resolve(null)]);if(!(null==d||null==(r=d.body)?void 0:r.messages))return void eg.setError("Failed to fetch latest chat state.");(0,eu.flushSync)(()=>{eg.updateChatState({chatId:o,messages:d.body.messages,newChatHistory:null==c?void 0:c.body})})};return{state:t,handleSendMessage:o,handleSetActiveTeam:e=>{let a="string"==typeof e?t.teams.find(t=>t.teamId===e):e;a&&(i(),eg.setActiveTeam(a))},handleNewChat:()=>{i(),eg.startNewChat()},handleLoadChat:(0,n.useCallback)(async e=>{var t;i(),eg.setStatus("loading");let n=await s("".concat(a,"/chats/").concat(e));(null==n||null==(t=n.body)?void 0:t.messages)&&eg.updateChatState({chatId:e,messages:n.body.messages})},[s,i])}},ep=()=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,s.jsx)("div",{className:"text-gray-400 mb-4 h-12 w-12"}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Team Management"}),(0,s.jsx)("p",{className:"mt-2 text-lg text-gray-500 dark:text-gray-400",children:"Select a team from the sidebar to view and manage its agents."})]});function ey(){let{state:e,handleSendMessage:t,handleSetActiveTeam:a,handleNewChat:r,handleLoadChat:i}=ef(),[l,o]=(0,n.useState)(""),d=()=>{l.trim()&&(t(l),o(""))},c=()=>{console.log("Team Builder submission is not yet implemented with the new store.")},m="team_management"===e.view||"team_builder"===e.view?"team":"chat";return(0,s.jsx)(X,{activeMode:m,setActiveMode:()=>console.log("setActiveMode is pending implementation"),teams:e.teams,designSessions:e.designSessions,activeTeam:e.activeTeam,activeDesignSession:e.activeDesignSession,chatHistory:e.chatHistory,currentChatId:e.currentChatId,onSetActiveTeam:a,onNewChat:r,onLoadChat:i,onCreateTeamWithAIClick:()=>console.log("onCreateTeamWithAIClick is pending implementation"),onLoadDesignSession:()=>console.log("onLoadDesignSession is pending implementation"),onDeleteDesignSession:()=>alert("Delete Design Session functionality is pending."),onRenameChat:()=>alert("Rename Chat functionality is pending."),onDeleteChat:()=>alert("Delete Chat functionality is pending."),onUpdateMission:()=>alert("Update Mission functionality is pending."),children:(()=>{if("error"===e.status)return(0,s.jsxs)("div",{className:"p-8 text-red-500",children:["Error: ",e.error]});let{displayMessages:t}=e.renderState,a="loading"===e.status||"polling"===e.status;switch(e.view){case"welcome":default:return(0,s.jsx)(ed,{onStartChat:r,activeTeam:e.activeTeam});case"chat":if(!e.activeTeam)return(0,s.jsx)(ed,{onStartChat:r,activeTeam:e.activeTeam});return(0,s.jsx)(ec,{messages:t,currentInput:l,setCurrentInput:o,isLoading:a,handleSendMessage:d,onAction:()=>console.log("onAction placeholder")});case"team_management":if(!e.activeTeam)return(0,s.jsx)(ep,{});return(0,s.jsx)(em,{team:e.activeTeam,agents:e.agents,isLoading:"loading"===e.status,onCreateAgent:()=>alert("Create Agent functionality is pending."),onEditAgent:()=>alert("Edit Agent functionality is pending."),onUpdateMission:()=>alert("Update Mission functionality is pending."),onRenameTeam:()=>alert("Rename Team functionality is pending."),onDeleteTeam:()=>alert("Delete Team functionality is pending.")});case"team_builder":return(0,s.jsx)(ec,{messages:e.messages,currentInput:l,setCurrentInput:o,isLoading:a,handleSendMessage:c,onAction:()=>console.log("onAction placeholder")})}})()})}},9434:(e,t,a)=>{a.d(t,{cn:()=>r,r:()=>l});var s=a(2596),n=a(9688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,s.$)(t))}function i(e){return null==e?null:"string"==typeof e?e:"object"==typeof e?JSON.stringify(e):String(e)}function l(e){let t={action:"conversational",holding_message:null,task_for_team:null,text:e,actions:null};if(!e)return{...t,action:"unknown"};try{let a=JSON.parse(e);if("object"!=typeof a||null===a)return t;if("execute_task"===a.action&&a.holding_message)return{action:"execute_task",holding_message:i(a.holding_message),task_for_team:i(a.task_for_team),text:null,actions:null};if(("redirect_to_team_builder"===a.action||Array.isArray(a.actions))&&(a.message||a.text))return{action:"redirect_to_team_builder",holding_message:null,task_for_team:null,text:i(a.message||a.text),actions:a.actions};return t}catch(e){return t}}}}]);